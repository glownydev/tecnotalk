(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{7154:function(e,s,r){Promise.resolve().then(r.bind(r,7608))},7608:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return AdminPage}});var n=r(8708),t=r(5444),i=r(2859);function AdminLogin(e){let{onLogin:s}=e,[r,i]=(0,t.useState)(""),[a,l]=(0,t.useState)(!1),handleSubmit=async e=>{e.preventDefault(),l(!0);try{await s(r)}catch(e){console.error(e)}l(!1)};return(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,n.jsxs)("div",{className:"max-w-md w-full space-y-8 p-8 bg-white rounded-lg shadow",children:[(0,n.jsx)("div",{children:(0,n.jsx)("h2",{className:"text-center text-3xl font-extrabold text-gray-900",children:"Administration Tecnotalk"})}),(0,n.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:handleSubmit,children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"password",className:"sr-only",children:"Mot de passe"}),(0,n.jsx)("input",{id:"password",name:"password",type:"password",required:!0,className:"appearance-none relative block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Mot de passe administrateur",value:r,onChange:e=>i(e.target.value)})]}),(0,n.jsx)("div",{children:(0,n.jsx)("button",{type:"submit",disabled:a,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:a?"Connexion...":"Se connecter"})})]})]})})}var a=r(5859),l=r(794),d=r(5e3);function cn(){for(var e=arguments.length,s=Array(e),r=0;r<e;r++)s[r]=arguments[r];return(0,d.m)((0,l.W)(s))}let c=a.fC,o=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,n.jsx)(a.aV,{ref:s,className:cn("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",r),...t})});o.displayName=a.aV.displayName;let u=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,n.jsx)(a.xz,{ref:s,className:cn("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",r),...t})});u.displayName=a.xz.displayName;let x=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,n.jsx)(a.VY,{ref:s,className:cn("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r),...t})});x.displayName=a.VY.displayName;let h=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,n.jsx)("div",{className:"relative w-full overflow-auto",children:(0,n.jsx)("table",{ref:s,className:cn("w-full caption-bottom text-sm",r),...t})})});h.displayName="Table";let m=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,n.jsx)("thead",{ref:s,className:cn("[&_tr]:border-b",r),...t})});m.displayName="TableHeader";let f=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,n.jsx)("tbody",{ref:s,className:cn("[&_tr:last-child]:border-0",r),...t})});f.displayName="TableBody";let j=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,n.jsx)("tr",{ref:s,className:cn("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...t})});j.displayName="TableRow";let b=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,n.jsx)("th",{ref:s,className:cn("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...t})});b.displayName="TableHead";let v=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,n.jsx)("td",{ref:s,className:cn("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...t})});v.displayName="TableCell";var p=r(432),g=r(9484);let y=(0,g.j)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),N=t.forwardRef((e,s)=>{let{className:r,variant:t,size:i,asChild:a=!1,...l}=e,d=a?p.g7:"button";return(0,n.jsx)(d,{className:cn(y({variant:t,size:i,className:r})),ref:s,...l})});function AdminDashboard(){let[e,s]=(0,t.useState)("classes"),[r,i]=(0,t.useState)([]),[a,l]=(0,t.useState)([]),[d,p]=(0,t.useState)([]),[g,y]=(0,t.useState)(!0);return((0,t.useEffect)(()=>{let fetchData=async()=>{try{let[e,s,r]=await Promise.all([fetch("/api/classes"),fetch("/api/students"),fetch("/api/events")]),[n,t,a]=await Promise.all([e.json(),s.json(),r.json()]);i(n),l(t),p(a)}catch(e){console.error("Erreur lors du chargement des donn\xe9es:",e)}finally{y(!1)}};fetchData()},[]),g)?(0,n.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:"Chargement..."}):(0,n.jsxs)("div",{className:"container mx-auto py-10",children:[(0,n.jsx)("h1",{className:"text-4xl font-bold mb-8",children:"Administration Tecnotalk"}),(0,n.jsxs)(c,{value:e,onValueChange:s,children:[(0,n.jsxs)(o,{children:[(0,n.jsx)(u,{value:"classes",children:"Classes"}),(0,n.jsx)(u,{value:"students",children:"\xc9tudiants"}),(0,n.jsx)(u,{value:"events",children:"\xc9v\xe9nements"})]}),(0,n.jsx)(x,{value:"classes",children:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold",children:"Classes"}),(0,n.jsx)(N,{children:"Ajouter une classe"})]}),(0,n.jsxs)(h,{children:[(0,n.jsx)(m,{children:(0,n.jsxs)(j,{children:[(0,n.jsx)(b,{children:"ID"}),(0,n.jsx)(b,{children:"Nom"}),(0,n.jsx)(b,{children:"Date de cr\xe9ation"}),(0,n.jsx)(b,{children:"Actions"})]})}),(0,n.jsx)(f,{children:r.map(e=>(0,n.jsxs)(j,{children:[(0,n.jsx)(v,{children:e.id}),(0,n.jsx)(v,{children:e.name}),(0,n.jsx)(v,{children:new Date(e.createdAt).toLocaleDateString()}),(0,n.jsxs)(v,{children:[(0,n.jsx)(N,{variant:"outline",className:"mr-2",children:"Modifier"}),(0,n.jsx)(N,{variant:"destructive",children:"Supprimer"})]})]},e.id))})]})]})}),(0,n.jsx)(x,{value:"students",children:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold",children:"\xc9tudiants"}),(0,n.jsx)(N,{children:"Ajouter un \xe9tudiant"})]}),(0,n.jsxs)(h,{children:[(0,n.jsx)(m,{children:(0,n.jsxs)(j,{children:[(0,n.jsx)(b,{children:"ID"}),(0,n.jsx)(b,{children:"Pr\xe9nom"}),(0,n.jsx)(b,{children:"Nom"}),(0,n.jsx)(b,{children:"Classe"}),(0,n.jsx)(b,{children:"Matricule"}),(0,n.jsx)(b,{children:"Actions"})]})}),(0,n.jsx)(f,{children:a.map(e=>{var s;return(0,n.jsxs)(j,{children:[(0,n.jsx)(v,{children:e.id}),(0,n.jsx)(v,{children:e.firstName}),(0,n.jsx)(v,{children:e.lastName}),(0,n.jsx)(v,{children:(null===(s=r.find(s=>s.id===e.classId))||void 0===s?void 0:s.name)||"-"}),(0,n.jsx)(v,{children:e.matricule||"-"}),(0,n.jsxs)(v,{children:[(0,n.jsx)(N,{variant:"outline",className:"mr-2",children:"Modifier"}),(0,n.jsx)(N,{variant:"destructive",children:"Supprimer"})]})]},e.id)})})]})]})}),(0,n.jsx)(x,{value:"events",children:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold",children:"\xc9v\xe9nements"}),(0,n.jsx)(N,{children:"Ajouter un \xe9v\xe9nement"})]}),(0,n.jsxs)(h,{children:[(0,n.jsx)(m,{children:(0,n.jsxs)(j,{children:[(0,n.jsx)(b,{children:"ID"}),(0,n.jsx)(b,{children:"Type"}),(0,n.jsx)(b,{children:"\xc9tudiant"}),(0,n.jsx)(b,{children:"Points"}),(0,n.jsx)(b,{children:"Commentaire"}),(0,n.jsx)(b,{children:"Date"}),(0,n.jsx)(b,{children:"Actions"})]})}),(0,n.jsx)(f,{children:d.map(e=>{let s=a.find(s=>s.id===e.studentId);return(0,n.jsxs)(j,{children:[(0,n.jsx)(v,{children:e.id}),(0,n.jsx)(v,{children:e.type}),(0,n.jsx)(v,{children:s?"".concat(s.firstName," ").concat(s.lastName):"-"}),(0,n.jsx)(v,{children:e.points}),(0,n.jsx)(v,{children:e.comment||"-"}),(0,n.jsx)(v,{children:new Date(e.createdAt).toLocaleDateString()}),(0,n.jsxs)(v,{children:[(0,n.jsx)(N,{variant:"outline",className:"mr-2",children:"Modifier"}),(0,n.jsx)(N,{variant:"destructive",children:"Supprimer"})]})]},e.id)})})]})]})})]})]})}function AdminPage(){let[e,s]=(0,t.useState)(!1);(0,i.useRouter)();let handleLogin=async e=>{try{let r=await fetch("/api/auth/admin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e})});if(r.ok)s(!0);else throw Error("Mot de passe incorrect")}catch(e){console.error("Erreur de connexion:",e),alert(e instanceof Error?e.message:"Erreur de connexion")}};return(0,n.jsx)("div",{className:"min-h-screen bg-background",children:e?(0,n.jsx)(AdminDashboard,{}):(0,n.jsx)(AdminLogin,{onLogin:handleLogin})})}N.displayName="Button"}},function(e){e.O(0,[140,912,499,744],function(){return e(e.s=7154)}),_N_E=e.O()}]);